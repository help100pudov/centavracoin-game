import{_ as f,o as l,c as r,a as s,q as m,b as h,F as v,r as y,n as x,t as a,u as C,e as g,g as w,w as k,h as _,i as T,p as M}from"./index-f7d62f39.js";import{m as I}from"./menuNav-2c0c5838.js";const E={props:{totalItems:{type:Number,required:!0},itemsPage:{type:Number,default:20},currentPage:{type:Number,default:1}},computed:{totalPages(){return Math.ceil(this.totalItems/this.itemsPage)},displayedPages(){const t=[];let e=Math.max(1,this.currentPage-2),c=Math.min(this.totalPages,e+4);c-e<4&&(e=Math.max(1,c-4));for(let u=e;u<=c;u++)t.push(u);return t}},methods:{goToPage(t){t>=1&&t<=this.totalPages&&this.$emit("page-change",t)},prevPage(){this.goToPage(this.currentPage-1)},nextPage(){this.goToPage(this.currentPage+1)}}},S={key:0,class:"p-3 flexCenter"},B={class:"d-flex"},N=["onClick"];function V(t,e,c,u,i,n){return n.totalPages>1?(l(),r("div",S,[s("div",B,[n.displayedPages[0]>1?(l(),r("a",{key:0,class:"card flexCenter p-1 mr-1",style:{"min-height":"34px","min-width":"38px"},onClick:e[0]||(e[0]=m(d=>n.goToPage(1),["prevent"]))},"1")):h("",!0),(l(!0),r(v,null,y(n.displayedPages,d=>(l(),r("a",{key:d,class:x(["card flexCenter p-1 mr-1",{"text-yellow":d===c.currentPage}]),style:{"min-height":"34px","min-width":"38px"},onClick:m(P=>n.goToPage(d),["prevent"])},a(d),11,N))),128)),n.displayedPages[n.displayedPages.length-1]<n.totalPages?(l(),r("a",{key:1,class:"card flexCenter p-1 mr-1",style:{"min-height":"34px","min-width":"38px"},onClick:e[1]||(e[1]=m(d=>n.goToPage(n.totalPages),["prevent"]))},a(n.totalPages),1)):h("",!0)])])):h("",!0)}const D=f(E,[["render",V]]),L={components:{Pagination:D,menuNav:I},name:"Home",setup(){return{toast:C()}},data(){return{users:{},totalItems:0,currentPage:1,itemsPage:50,edit:0}},created(){this.loadContent()},methods:{loadData(t){this.currentPage=t,this.loadContent()},async loadContent(){const t=await this.$post("/panel/users",{page:this.currentPage,count:this.itemsPage});t&&t.users&&(this.totalItems=t.count.cnt,this.users=t.users)},async submitLoad(t){const e=await this.$post(t,"submit");e&&e.users&&(this.totalItems=e.count.cnt,this.users=e.users)},editModal(t){this.edit=t,this.$modal("userEdit")},async submitEdit(t){const e=await this.$post(t,"submit");e&&e=="Saved"&&(this.toast.success(this.$t("Saved")),this.$modal("userEdit"))}}},q={class:""},A={class:"card p-1",style:{overflow:"auto"}},F={class:"table1"},R={class:"thead"},U={class:""},z={class:"p-2 text-left"},H={class:"p-2"},O={class:"p-2"},j={class:"tbody"},G=["id","onClick"],J={class:"p-2"},K={class:"p-2"},Q={class:"p-2"},W={class:"text-center fs-20px fw-700"},X={class:"text-center mt-2"},Y={class:"mt-1"},Z={class:"mt-1"},$={class:"mt-1"},tt={class:"mt-1"},et=["value"],st={class:"mt-3"},it={class:"fw-600"},nt={class:"mt-2"},at={class:"mt-4"},ot={type:"submit",class:"btn claim"};function lt(t,e,c,u,i,n){const d=_("menuNav"),P=_("Pagination"),b=_("Modal");return l(),r(v,null,[g(d),s("div",q,[s("form",{onSubmit:e[0]||(e[0]=m((...o)=>n.submitLoad&&n.submitLoad(...o),["prevent"])),id:"/panel/users",class:"flexBetween p-2"},[...e[4]||(e[4]=[w('<div class="w-100"><input type="hidden" name="act" value="search"><input type="text" class="" name="val"></div><div class="pl-3"><button type="submit" class="btn p-3 pl-5 pr-5"><i class="bi bi-search fs-20px"></i></button></div>',2)])],32),s("div",A,[s("table",F,[s("thead",R,[s("tr",U,[s("th",z,a(t.$t("User")),1),s("th",H,a(t.$t("Balance")),1),s("th",O,a(t.$t("Referral")),1)])]),s("tbody",j,[(l(!0),r(v,null,y(i.users,(o,p)=>(l(),r("tr",{key:p,id:"card"+p,onClick:rt=>n.editModal(p)},[s("td",J,a(o.first.slice(0,8))+" "+a(o.last.charAt(0)),1),s("td",K,a(t.$num(o.centa)),1),s("td",Q,a(t.$num(o.refAll)),1)],8,G))),128))])])]),g(P,{totalItems:i.totalItems,currentPage:i.currentPage,itemsPage:i.itemsPage,onPageChange:e[1]||(e[1]=o=>n.loadData(o))},null,8,["totalItems","currentPage","itemsPage"])]),g(b,{id:"userEdit"},{default:k(()=>[i.users[i.edit]?(l(),r("form",{key:0,onSubmit:e[3]||(e[3]=m((...o)=>n.submitEdit&&n.submitEdit(...o),["prevent"])),id:"/panel/users",class:"p-5 pt-3"},[s("div",W,a(i.users[i.edit].login||"---"),1),s("div",X,a(i.users[i.edit].first)+" "+a(i.users[i.edit].last),1),s("div",Y,"id: "+a(i.users[i.edit].id),1),s("div",Z,"Tg id"+a(i.users[i.edit].user),1),s("div",$,"Reg: "+a(t.$dateTime.date(i.users[i.edit].reg)),1),s("div",tt,"Online: "+a(t.$dateTime.date(i.users[i.edit].who)),1),e[5]||(e[5]=s("input",{type:"hidden",name:"act",value:"edit"},null,-1)),s("input",{type:"hidden",name:"userId",value:i.users[i.edit].id},null,8,et),s("div",st,[s("label",it,a(t.$t("Centa")),1),s("div",nt,[T(s("input",{type:"text",class:"",name:"centa","onUpdate:modelValue":e[2]||(e[2]=o=>i.users[i.edit].centa=o)},null,512),[[M,i.users[i.edit].centa]])])]),s("div",at,[s("button",ot,a(t.$t("Save")),1)])],32)):h("",!0)]),_:1})],64)}const ut=f(L,[["render",lt]]);export{ut as default};
